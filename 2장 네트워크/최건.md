# 2장

## 네트워크

네트워크는 노드(node)와 링크(link)가 서로 연결되어 있거나 연결되어 있으며 자원을 공유하는 집합이다.

이때 노드는 서버, 라우터, 스위치 등 네트워크 장치를 의미하고, 링크는 유선 또는 무선을 의미한다.

### 처리량

처리량(throughput)은 링크 내에서 성공적으로 전달된 데이터의 양을 뜻하며 단위는 bps(bits per second)를 사용한다.

### 대역폭

대역폭(bandwidth)은 주어진 시간 동안 네트워크 연결을 통해 전송 가능한 최대 비트의 양을 의미한다.

### 지연 시간

지연 시간(latency)은 요청이 처리되는 시간으로, 메시지가 두 장치 사이를 왕복하는 동안 소요되는 시간을 의미한다.

## 네트워크 위상

네트워크 위상(network topology)은 노드와 링크의 연결 구조를 의미한다.

### 트리(tree)형

네트워크의 모든 노드들이 중심의 한 노드에 집약되있는 구성이다.

**PROS**

- 확장이 쉽다
- 관리가 쉽다

**CONS**

- 부모 노드가 고장날 경우 하위 노드들이 마비된다

### 버스(bus)형

단일 케이블에 모든 모드를 연결한 구성이다.

**PROS**

- 확장이 쉽다
- 단일 케이블을 사용하기에 비용이 저렴하다
- 노드의 고장이 다른 노드에 영향을 끼치지 않는다

**CONS**

- 스푸핑 공격을 받을 위험이 있다
- 케이블에 이상이 발생할 경우 모든 노드가 마비된다

### 스타(star)형

중앙의 노드를 중심으로 모든 노드들이 연결되는 구성이다.

**PROS**

- 확장이 쉽다
- 관리가 쉽다
- 장애를 발견하기 쉽다

**CONS**

- 중앙 노드가 고장날 경우 전체 시스템이 마비된다

### 링(ring)형

각각의 노드가 양 옆의 두 노드와 연결하여 전체적으로 고리와 같이 하나의 연속된 길을 통해 통신을 하는 구성이다.

**PROS**

- 장애를 발견하기 쉽다
- 노드 수가 증가되어도 네트워크상의 손실이 거의 없다

**CONS**

- 네트워크 구성 변경이 어렵다
- 회선에 장애가 발생하면 전체에 영향을 끼친다

### 메시(mesh)형

그물망처럼 각각의 노드가 서로 연결되어있는 구성이다.

**PROS**

- 트래픽 분산 처리가 가능하다
- 장애가 발생할 경우 다른 경로를 사용 가능하다

**CONS**

- 설치 비용이 높다
- 노드의 추가가 어렵다

## 병목 현상

병목(bottleneck)현상은 전체 시스템 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 상황을 의미한다.

## 네트워크 분류

네트워크는 규모를 기반으로 분리 가능하다.

### LAN

LAN(Local Area Network)은 근거리 통신망을 의미한다. 전송 속도가 빠르며, 혼잡하지 않다.

### MAN

MAN(Metropolitan Area Network)은 도시 규모에서 사용하는 네트워크를 의미한다. 전송 속도는 평균이며 LAN보다 혼잡하다.

### WAN

WAN(Wide Area Network)은 국가 또는 대륙 규모에서 사용하는 네트워크를 의미한다. 전송 속도는 낮으며 MAN보다 혼잡하다.

## 네트워크 성능 분석 명령어

### ping

ping(Packet INternet Groper)은 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어이다. TCP/IP 프로토콜 중에 ICMP 프로토콜을 사용하기에, 해당 프로토콜을 지원하지 않거나 ICMP을 차단하는 대상의 경우 사용이 불가능하다.

```bash
ping www.google.com -n 10
```

### netstat

netstat은 접속되어 있는 서비스들의 네트워크 상태를 표시하는데 사용하는 명령어이다. 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등의 목록을 보여준다. 주로 서비스의 포트가 개방되어 있는지 확인할 때 사용한다.

```bash
netstat
```

### nslookup

nslookup은 DNS에 관련된 내용을 확인하기 위해 사용하는 명령어이다. 특정 도메인에 할당된 IP를 확인하기 위해 사용한다.

```bash
nslookup
```

### tracert

(windows: tracert, linux: traceroute)는 목적지 노드까지의 네트워크 경로를 확인하는 명령어이다. 목적지 노드 구간들 중 어느 구간에서 응답 시간이 지연되는지 여부를 파악 가능하다.

```bash
tracert www.google.com
```

## 네트워크 프로토콜 표준화

네트워크 프로토콜은 이기종간 통신을 위해 설정된 공통된 약속이다. 이러한 프로토콜은 기업이나 개인이 발표해서 정해지는 것이 아닌 IEEE/IETF 표준화 단체에서 지정된다.

e.g. HTTP, HTTPS, IEEE802.3

## TCP/IP 4계층 모델

인터넷 프로토콜 스위트(internet protocol suite)는 인터넷에서 컴퓨터들이 서로 정보를 주고받는데 사용되는 프로토콜의 집합이며, 주로 TCP/IP 4계층 모델로 또는 OSI 7계층 모델로 주로 설명된다.

### 애플리케이션 계층

애플리케이션(application) 계층은 FTP, HTTP, SSH, SMTP, DNS 등 응용 프로그램이 사용되는 프로토콜 계층이며, 웹, 이메일 등의 서비스를 실질적으로 제공하는 계층이다.

#### FTP

파일을 전송할 때 사용되는 표준 통신 프로토콜이다

#### SSH

보안되지 않은 네트워크에서 네트워크 서비스를 안전하게 운영하기 위한 암호화 네트워크 프로토콜이다.

#### HTTP
World Wide Web을 위한 데이터 통신의 기초이자 웹 사이트를 이용하는 데 사용하는 프로토콜이다.

#### SMTP

전자 메일 전송을 위한 인터넷 표준 통신 프로토콜이다.

#### DNS

도메인 이름과 IP주소를 매핑해주는 서버로, IP 주소가 변경되더라도 동일한 도메인 주소로 접속이 가능하다.

### 전송 계층

전송(transport) 계층은 송신자와 수신자를 연결하는 통신 서비스를 제공하며 에플리케이션 계층 <-> 인터넷 계층 사이의 중계 역할을 수행한다. 대표적으로 TCP, UDP가 있다.

#### TCP

TCP(Transmission Control Protocol)은 연결 지향적 프로토콜이다. 연결 과정이 필요하지만 신뢰성이 높으며, 데이터의 전송 순서를 보장하고, 전이중(Full Duplex) 통신을 지원한다. 다만 1대1 점대점(Point to Point) 통신만 가능하며 UDP보다 상대적으로 느리다.

신뢰성(연결)을 확보할 때는 3-way handshake 과정을, 연결을 해제할 떄는 4-way handshake 과정을 거친다.

#### UDP

UDP(User Datagram Protocol)는 비연결 지향적 프로토콜이다. 연결 과정 및 handshake 과정이 생략되어 TCP보다 통신 속도가 빠르다. 다만 데이터의 전송 순서를 보장하지 않으며, 신뢰성이 TCP보다 낮다.

### 인터넷 계층

인터넷(internet) 계층은 장치로부터 받은 네트워크 패킷을 IP 주소로 지정된 목적지로 전송하기 위해 사용되는 계층이다. IP, ARP, ICMP 등이 있으며, 상대방이 제대로 받았는지에 대해 보장하지 않는 비연결형적인 특징을 가지고 있다.

### 링크 계층

링크(link) 계층은 전선, 무선, 광섬유 등으로 물리적으로 데이터를 전달하며 장치 간에 신호를 주고받는 계층이다.

### 동축 케이블

동축 케이블(coaxial cable)은 동선을 절연물질과 전도체가 감싸고 있고 외부를 외피가 둘러싸고 있는 형태의 케이블이다.

#### 꼬임선 케이블

꼬임선 케이블(twisted pair cable)은 여러 가닥의 구리선을 꼬아서 묶은 케이블이다.

#### 광섬유 케이블

광섬유 케이블(optical cable)은 레이저를 이용하여 통신하기에 구리선과 비교할 수 없을 만큼의 장거리 및 고속 통신이 가능하다.

### 단방향 통신

단방향 통신(simplex)은 오직 한쪽 방향으로만 통신 가능하다.

### 반이중 통신

반이중 통신(half duplex)은 양쪽 장치가 서로 통신할 수 있지만, 동시에는 통신할 수 없다.

### 전이중 통신

전이중 통신(full duplex)은 양쪽 장치가 동시에 송/수신할 수 있다.

### 와이파이

와이파이(wifi)는 전자기기들이 무선 LAN 신호에 연결할 수 있게 하는 기술로, 무선 접속 장치(AP, access point)가 요구된다. 대표적인 무선 접속 장치로는 가정용 공유기가 있다.

### BSS

BSS(Basic Service Set)은 기본 서비스 집합을 의미하며 단순 공유기를 통해 네트워크에 접속하는 것이 아닌 통일 BSS 내에 있는 AP들과 장치들이 서로 통신이 가능한 구조이다. 근거리 무선 통신을 제공하고, 단일의 AP를 기반으로 구축이 되어 있기에 사용자가 장소를 자유롭게 이동하며 네트워크에 접속하는 것은 불가능하다.

### ESS

ESS(Extended Service Set)는 하나 이상의 연결된 BSS 집합이다. 장거리 무선 통신을 제공하며 BSS보다 우수한 가용성과 이동성을 제공한다. 즉, 사용자가 장소를 자유롭게 이동하며 중단 없이 네트워크에 지속적인 연결을 유지할 수 있다.

## 계층간 송수신 과정

애플리케이션 계층에서 전송 계층으로 요청(request) 값들이 캡슐화 과정을 거쳐 전달되고, 수신측에서는 송신 과정의 역순으로 캡슐화된 요청 값의 포장을 해제한다.

(송신) 애플리케이션 계층 -> 전송 계층 -> 인터넷 계층 -> 링크 계층

(수신) 링크 계층 -> 인터넷 계층 -> 전송 계층 -> 애플리케이션 계층

### 캡슐화

캡슐화(encapsulation)는 상위 계층의 헤더와 데이터를 하위 계층의 데이터 부분에 포함시키고 해당 계층의 헤더를 삽입하는 과정이다.

### PDU

PDU(Protocol Data Unit)는 한 네트워크 계층에서 다른 네트워크 계층으로 데이터가 전송될 때의 단위이다. PDU는 제어 관련 정보가 포함된 헤더와 페이로드로 구성되어있으며, 각 계층마다 사용하는 명칭이 다르다.

애플리케이션 계층: 메시지
전송 계층: 세그먼트(TCP), 데이터그램(UDP)
인터넷 계층: 패킷
링크 계층: 프레임(데이터 링크 계층), 비트(물리 계층)

## 네트워크 기기

### L7 스위치 - 애플리케이션 계층

스위치(switch)는 여러 장비를 연결하고 데이터 통신을 중재하며 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비이다. 로드밸런서라고도 불리우며, 서버의 부하를 분산하는 기기이다.

### 라우터 - 인터넷 계층

라우터(router)는 여러 개의 네트워크를 연결, 분할, 구분시켜주는 역할을 수행하며, 다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을 때 패킷 소모를 최소화하고 경로를 최적화하여 최단 경로를 설정하는 기기이다.

### 브릿지 - 데이터 링크 계층

브릿지(bridge)는 두 개의 LAN을 상호 접속할 수 있도록 하는 통신망 연결 장치로, 장치에서 받아온 MAC 주소를 MAC 주소 테이블로 관리하는, 포트와 포트 사이의 다리 역할을 수행하는 기기이다.

### NIC - 물리 계층

NIC(Network Interface Card)는 LAN 카드라고도 불리우며, 네트워크와 빠른 속도로 데이터를 송수신할 수 있도록 컴퓨터 내부에 설치하는 확장 카드이다.

### 중계기 - 물리 계층

중계기(repeater)는 감쇠된 신호를 증폭시키는 장치이다.

## IP 주소

### ARP

ARP(Adress Resolution Protocol)은 가상 주소인 IP 주소에서 물리적 주소인 MAC 주소를 구하는 프로토콜이다.

### RARP

RARP(Reverse Adress Resolution Protocol)는 물리적 주소인 MAC 주소에서 가상 주소인 IP 주소를 구하는 프로토콜이다.

### 홉바이홉통신

홉바이홉(hop by hop)통신은 IP 주소를 통해 통신하는 과정을 의미한다. 이때 홉(hop)은 통신망에서 각 패킷이 여러 개의 라우터를 건너가는 모습을 비유적으로 표현한 것이다. 즉, 시작 주소로부터 다음 IP로 계속해서 목적지까지 이동하는 라우팅 과정을 거쳐 패킷이 최종적으로 도달하는 통신을 뜻한다.

### 라우팅 테이블

라우팅 테이블은 송신지에서 수신지까지 도달하기 위해 사용되며, 라우터에 들어가 있는 목적지 정보들과 그 목적지로 가기 위한 방법이 포함된 목록을 뜻한다. 라우팅 테이블에는 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야 할 다음 라우터의 정보를 가지고 있다.

### 게이트웨이

게이트웨이는 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할을 하는 컴퓨터나 소프트웨어를 의미하는 용어이다.

### IPv4 & IPv6

IPv4는 32비트를 8비트 단위로 점을 찍어 표기한다.
IPv6는 64비트를 16비트 단위로 점을 찍어 표기한다.

## HTTP

### HTTP/1.0

HTTP/1.0은 기본적으로 하나의 연결당 하나의 요청을 처리하도록 설계되었고, 이는 TCP의 연결 설정 과정인 3-way handshake로 인해 RTT(패킷 왕복 시간)를 증가시켰다.

이러한 한계를 극복하기 위해 이미지 분할, 코드 압축, base64 인코딩 등의 방법을 사용하게 되었다.

#### 이미지 분할

복수의 이미지가 하나의 파일로 결합되어있는 형태의 이미지의 일부분을 background-position 등을 사용하여 분할하여 마치 개별의 이미지인 것처럼 사용하는 기법이다.

#### 코드 압축

불필요한 들여쓰기, 공백, 개행 등을 제거하고 JS 특유의 특징을 활용하여, 파일 크기를 보다 덜 차지하면서 의미는 동치인 문자로 치환하는 기법이다.

e.g.

```js
true // !0
false // 0
```

### HTTP/1.1

HTTP/1.1은 HTTP/1.0의 개선안으로, 매번 TCP 연결을 하지 않고 한번 TCP 초기화를 한 이후에 keep-alive 라는 옵션으로 여러 개의 파일을 송수신할 수 있도록 변경되었다.

다만, 여전히 HOL(Head Of Line Blocking) 같은 성능 저하 현상이 존재했으며, 헤더에 쿠키 및 다양한 압축되지 않은 메타데이터가 포함되어있었다.

참고) HTTP/1.0에서도 keep-alive가 있었지만 표준화가 되어 있지 않았고, HTTP/1.1부터 표준화가 되었다.

### HTTPS

HTTPS는 애플리케이션 계층과 전송 계층 사이에 신뢰 계층인 SSL/TLS 계층을 추가하여 신뢰할 수 있는 HTTP 요청을 보낼 수 있다. 즉, 통신의 암호화를 지원한다.

#### SSL/TLS

SSL(Secure Socket Layer)/TLS(Transport Layer Security Protocol)은 전송 계층에서 보안을 제공하는 프로토콜로, 서버와 클라이언트가 통신할 때 제 3자가 메시지를 도청하거나 변조하지 못하도록 한다.
